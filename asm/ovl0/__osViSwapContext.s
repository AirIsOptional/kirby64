.set noat
.set noreorder
.set gp=64
.include "macros.inc"

.section .text, "ax" 


glabel __osViSwapContext
/* 0360E0 800354E0 27BDFFB8 */  addiu $sp, $sp, -0x48
/* 0360E4 800354E4 AFB00018 */  sw    $s0, 0x18($sp)
/* 0360E8 800354E8 AFBF001C */  sw    $ra, 0x1c($sp)
/* 0360EC 800354EC 3C108004 */  lui   $s0, %hi(__osViNext) # $s0, 0x8004
/* 0360F0 800354F0 3C0EA440 */  lui   $t6, %hi(D_A4400010) # $t6, 0xa440
/* 0360F4 800354F4 8E10FD64 */  lw    $s0, %lo(__osViNext)($s0)
/* 0360F8 800354F8 8DCF0010 */  lw    $t7, %lo(D_A4400010)($t6)
/* 0360FC 800354FC 8E050008 */  lw    $a1, 8($s0)
/* 036100 80035500 31F80001 */  andi  $t8, $t7, 1
/* 036104 80035504 AFB8002C */  sw    $t8, 0x2c($sp)
/* 036108 80035508 8E040004 */  lw    $a0, 4($s0)
/* 03610C 8003550C 0C00BFE8 */  jal   osVirtualToPhysical
/* 036110 80035510 AFA50044 */   sw    $a1, 0x44($sp)
/* 036114 80035514 8FB9002C */  lw    $t9, 0x2c($sp)
/* 036118 80035518 8FA50044 */  lw    $a1, 0x44($sp)
/* 03611C 8003551C 960A0000 */  lhu   $t2, ($s0)
/* 036120 80035520 00194080 */  sll   $t0, $t9, 2
/* 036124 80035524 01194021 */  addu  $t0, $t0, $t9
/* 036128 80035528 00084080 */  sll   $t0, $t0, 2
/* 03612C 8003552C 00A83021 */  addu  $a2, $a1, $t0
/* 036130 80035530 8CC90028 */  lw    $t1, 0x28($a2)
/* 036134 80035534 314B0002 */  andi  $t3, $t2, 2
/* 036138 80035538 11600008 */  beqz  $t3, .L8003555C_ovl0
/* 03613C 8003553C 01222021 */   addu  $a0, $t1, $v0
/* 036140 80035540 8CAD0020 */  lw    $t5, 0x20($a1)
/* 036144 80035544 8E0C0020 */  lw    $t4, 0x20($s0)
/* 036148 80035548 2401F000 */  li    $at, -4096
/* 03614C 8003554C 01A17024 */  and   $t6, $t5, $at
/* 036150 80035550 018E7825 */  or    $t7, $t4, $t6
/* 036154 80035554 10000003 */  b     .L80035564_ovl0
/* 036158 80035558 AE0F0020 */   sw    $t7, 0x20($s0)
.L8003555C_ovl0:
/* 03615C 8003555C 8CB80020 */  lw    $t8, 0x20($a1)
/* 036160 80035560 AE180020 */  sw    $t8, 0x20($s0)
.L80035564_ovl0:
/* 036164 80035564 96190000 */  lhu   $t9, ($s0)
/* 036168 80035568 33280004 */  andi  $t0, $t9, 4
/* 03616C 8003556C 51000035 */  beql  $t0, $zero, .L80035644_ovl0
/* 036170 80035570 8CCE002C */   lw    $t6, 0x2c($a2)
/* 036174 80035574 8CC3002C */  lw    $v1, 0x2c($a2)
/* 036178 80035578 C6040024 */  lwc1  $f4, 0x24($s0)
/* 03617C 8003557C 3C014F80 */  li    $at, 0x4F800000 # 4294967296.000000
/* 036180 80035580 30690FFF */  andi  $t1, $v1, 0xfff
/* 036184 80035584 44893000 */  mtc1  $t1, $f6
/* 036188 80035588 05210004 */  bgez  $t1, .L8003559C_ovl0
/* 03618C 8003558C 46803220 */   cvt.s.w $f8, $f6
/* 036190 80035590 44815000 */  mtc1  $at, $f10
/* 036194 80035594 00000000 */  nop   
/* 036198 80035598 460A4200 */  add.s $f8, $f8, $f10
.L8003559C_ovl0:
/* 03619C 8003559C 46082402 */  mul.s $f16, $f4, $f8
/* 0361A0 800355A0 24020001 */  li    $v0, 1
/* 0361A4 800355A4 3C014F00 */  li    $at, 0x4F000000 # 2147483648.000000
/* 0361A8 800355A8 444AF800 */  cfc1  $t2, $31
/* 0361AC 800355AC 44C2F800 */  ctc1  $v0, $31
/* 0361B0 800355B0 00000000 */  nop   
/* 0361B4 800355B4 460084A4 */  cvt.w.s $f18, $f16
/* 0361B8 800355B8 4442F800 */  cfc1  $v0, $31
/* 0361BC 800355BC 00000000 */  nop   
/* 0361C0 800355C0 30420078 */  andi  $v0, $v0, 0x78
/* 0361C4 800355C4 50400013 */  beql  $v0, $zero, .L80035614_ovl0
/* 0361C8 800355C8 44029000 */   mfc1  $v0, $f18
/* 0361CC 800355CC 44819000 */  mtc1  $at, $f18
/* 0361D0 800355D0 24020001 */  li    $v0, 1
/* 0361D4 800355D4 46128481 */  sub.s $f18, $f16, $f18
/* 0361D8 800355D8 44C2F800 */  ctc1  $v0, $31
/* 0361DC 800355DC 00000000 */  nop   
/* 0361E0 800355E0 460094A4 */  cvt.w.s $f18, $f18
/* 0361E4 800355E4 4442F800 */  cfc1  $v0, $31
/* 0361E8 800355E8 00000000 */  nop   
/* 0361EC 800355EC 30420078 */  andi  $v0, $v0, 0x78
/* 0361F0 800355F0 14400005 */  bnez  $v0, .L80035608_ovl0
/* 0361F4 800355F4 00000000 */   nop   
/* 0361F8 800355F8 44029000 */  mfc1  $v0, $f18
/* 0361FC 800355FC 3C018000 */  lui   $at, 0x8000
/* 036200 80035600 10000007 */  b     .L80035620_ovl0
/* 036204 80035604 00411025 */   or    $v0, $v0, $at
.L80035608_ovl0:
/* 036208 80035608 10000005 */  b     .L80035620_ovl0
/* 03620C 8003560C 2402FFFF */   li    $v0, -1
/* 036210 80035610 44029000 */  mfc1  $v0, $f18
.L80035614_ovl0:
/* 036214 80035614 00000000 */  nop   
/* 036218 80035618 0440FFFB */  bltz  $v0, .L80035608_ovl0
/* 03621C 8003561C 00000000 */   nop   
.L80035620_ovl0:
/* 036220 80035620 AE02002C */  sw    $v0, 0x2c($s0)
/* 036224 80035624 8CCB002C */  lw    $t3, 0x2c($a2)
/* 036228 80035628 2401F000 */  li    $at, -4096
/* 03622C 8003562C 44CAF800 */  ctc1  $t2, $31
/* 036230 80035630 01616824 */  and   $t5, $t3, $at
/* 036234 80035634 004D6025 */  or    $t4, $v0, $t5
/* 036238 80035638 10000003 */  b     .L80035648_ovl0
/* 03623C 8003563C AE0C002C */   sw    $t4, 0x2c($s0)
/* 036240 80035640 8CCE002C */  lw    $t6, 0x2c($a2)
.L80035644_ovl0:
/* 036244 80035644 AE0E002C */  sw    $t6, 0x2c($s0)
.L80035648_ovl0:
/* 036248 80035648 3C028004 */  lui   $v0, %hi(viThreadStack) # $v0, 0x8004
/* 03624C 8003564C 8C42FE6C */  lw    $v0, %lo(viThreadStack)($v0)
/* 036250 80035650 8CCF0030 */  lw    $t7, 0x30($a2)
/* 036254 80035654 0002C400 */  sll   $t8, $v0, 0x10
/* 036258 80035658 01F8C823 */  subu  $t9, $t7, $t8
/* 03625C 8003565C 03224021 */  addu  $t0, $t9, $v0
/* 036260 80035660 AFA80034 */  sw    $t0, 0x34($sp)
/* 036264 80035664 96030000 */  lhu   $v1, ($s0)
/* 036268 80035668 8CA7001C */  lw    $a3, 0x1c($a1)
/* 03626C 8003566C 30690020 */  andi  $t1, $v1, 0x20
/* 036270 80035670 11200002 */  beqz  $t1, .L8003567C_ovl0
/* 036274 80035674 306A0040 */   andi  $t2, $v1, 0x40
/* 036278 80035678 00003825 */  move  $a3, $zero
.L8003567C_ovl0:
/* 03627C 8003567C 5140000D */  beql  $t2, $zero, .L800356B4_ovl0
/* 036280 80035680 306B0080 */   andi  $t3, $v1, 0x80
/* 036284 80035684 AE00002C */  sw    $zero, 0x2c($s0)
/* 036288 80035688 8E040004 */  lw    $a0, 4($s0)
/* 03628C 8003568C AFA70038 */  sw    $a3, 0x38($sp)
/* 036290 80035690 AFA60024 */  sw    $a2, 0x24($sp)
/* 036294 80035694 0C00BFE8 */  jal   osVirtualToPhysical
/* 036298 80035698 AFA50044 */   sw    $a1, 0x44($sp)
/* 03629C 8003569C 8FA50044 */  lw    $a1, 0x44($sp)
/* 0362A0 800356A0 8FA60024 */  lw    $a2, 0x24($sp)
/* 0362A4 800356A4 8FA70038 */  lw    $a3, 0x38($sp)
/* 0362A8 800356A8 00402025 */  move  $a0, $v0
/* 0362AC 800356AC 96030000 */  lhu   $v1, ($s0)
/* 0362B0 800356B0 306B0080 */  andi  $t3, $v1, 0x80
.L800356B4_ovl0:
/* 0362B4 800356B4 51600010 */  beql  $t3, $zero, .L800356F8_ovl0
/* 0362B8 800356B8 3C0FA440 */   lui   $t7, 0xa440
/* 0362BC 800356BC 960D0028 */  lhu   $t5, 0x28($s0)
/* 0362C0 800356C0 3C0103FF */  lui   $at, 0x3ff
/* 0362C4 800356C4 8E040004 */  lw    $a0, 4($s0)
/* 0362C8 800356C8 000D6400 */  sll   $t4, $t5, 0x10
/* 0362CC 800356CC 01817024 */  and   $t6, $t4, $at
/* 0362D0 800356D0 AE0E002C */  sw    $t6, 0x2c($s0)
/* 0362D4 800356D4 AFA70038 */  sw    $a3, 0x38($sp)
/* 0362D8 800356D8 AFA60024 */  sw    $a2, 0x24($sp)
/* 0362DC 800356DC 0C00BFE8 */  jal   osVirtualToPhysical
/* 0362E0 800356E0 AFA50044 */   sw    $a1, 0x44($sp)
/* 0362E4 800356E4 8FA50044 */  lw    $a1, 0x44($sp)
/* 0362E8 800356E8 8FA60024 */  lw    $a2, 0x24($sp)
/* 0362EC 800356EC 8FA70038 */  lw    $a3, 0x38($sp)
/* 0362F0 800356F0 00402025 */  move  $a0, $v0
/* 0362F4 800356F4 3C0FA440 */  lui   $t7, %hi(D_A4400020) # $t7, 0xa440
.L800356F8_ovl0:
/* 0362F8 800356F8 ADE40004 */  sw    $a0, %lo(D_A4400004)($t7)
/* 0362FC 800356FC 8CB80008 */  lw    $t8, 8($a1)
/* 036300 80035700 3C19A440 */  lui   $t9, %hi(D_A4400008) # $t9, 0xa440
/* 036304 80035704 3C09A440 */  lui   $t1, %hi(D_A4400014) # $t1, 0xa440
/* 036308 80035708 AF380008 */  sw    $t8, %lo(D_A4400008)($t9)
/* 03630C 8003570C 8CA8000C */  lw    $t0, 0xc($a1)
/* 036310 80035710 3C0BA440 */  lui   $t3, %hi(D_A4400018) # $t3, 0xa440
/* 036314 80035714 3C0CA440 */  lui   $t4, %hi(D_A440001C) # $t4, 0xa440
/* 036318 80035718 AD280014 */  sw    $t0, %lo(D_A4400014)($t1)
/* 03631C 8003571C 8CAA0010 */  lw    $t2, 0x10($a1)
/* 036320 80035720 3C18A440 */  lui   $t8, %hi(D_A4400034) # $t8, 0xa440
/* 036324 80035724 3C08A440 */  lui   $t0, %hi(D_A4400028) # $t0, 0xa440
/* 036328 80035728 AD6A0018 */  sw    $t2, %lo(D_A4400018)($t3)
/* 03632C 8003572C 8CAD0014 */  lw    $t5, 0x14($a1)
/* 036330 80035730 3C0AA440 */  lui   $t2, %hi(D_A440002C) # $t2, 0xa440
/* 036334 80035734 3C028004 */  lui   $v0, %hi(__osViCurr) # $v0, 0x8004
/* 036338 80035738 AD8D001C */  sw    $t5, %lo(D_A440001C)($t4)
/* 03633C 8003573C 8CAE0018 */  lw    $t6, 0x18($a1)
/* 036340 80035740 3C0DA440 */  lui   $t5, %hi(D_A440000C) # $t5, 0xa440
/* 036344 80035744 2442FD60 */  addiu $v0, %lo(__osViCurr) # addiu $v0, $v0, -0x2a0
/* 036348 80035748 ADEE0020 */  sw    $t6, %lo(D_A4400020)($t7)
/* 03634C 8003574C AF070024 */  sw    $a3, %lo(D_A4400024)($t8)
/* 036350 80035750 8FB90034 */  lw    $t9, 0x34($sp)
/* 036354 80035754 3C0EA440 */  lui   $t6, %hi(D_A4400030) # $t6, 0xa440
/* 036358 80035758 3C038004 */  lui   $v1, %hi(__osViNext) # $v1, 0x8004
/* 03635C 8003575C AD190028 */  sw    $t9, %lo(D_A4400028)($t0)
/* 036360 80035760 8CC90034 */  lw    $t1, 0x34($a2)
/* 036364 80035764 2463FD64 */  addiu $v1, %lo(__osViNext) # addiu $v1, $v1, -0x29c
/* 036368 80035768 AD49002C */  sw    $t1, %lo(D_A440002C)($t2)
/* 03636C 8003576C 8CCB0038 */  lw    $t3, 0x38($a2)
/* 036370 80035770 ADAB000C */  sw    $t3, %lo(D_A440000C)($t5)
/* 036374 80035774 8E0C0020 */  lw    $t4, 0x20($s0)
/* 036378 80035778 02005825 */  move  $t3, $s0
/* 03637C 8003577C ADCC0030 */  sw    $t4, %lo(D_A4400030)($t6)
/* 036380 80035780 8E0F002C */  lw    $t7, 0x2c($s0)
/* 036384 80035784 260C0030 */  addiu $t4, $s0, 0x30
/* 036388 80035788 AF0F0034 */  sw    $t7, %lo(D_A4400034)($t8)
/* 03638C 8003578C 8E19000C */  lw    $t9, 0xc($s0)
/* 036390 80035790 AD190000 */  sw    $t9, ($t0)
/* 036394 80035794 8C4A0000 */  lw    $t2, ($v0)
/* 036398 80035798 AC500000 */  sw    $s0, ($v0)
/* 03639C 8003579C AC6A0000 */  sw    $t2, ($v1)
.L800357A0_ovl0:
/* 0363A0 800357A0 8D610000 */  lw    $at, ($t3)
/* 0363A4 800357A4 256B000C */  addiu $t3, $t3, 0xc
/* 0363A8 800357A8 254A000C */  addiu $t2, $t2, 0xc
/* 0363AC 800357AC AD41FFF4 */  sw    $at, -0xc($t2)
/* 0363B0 800357B0 8D61FFF8 */  lw    $at, -8($t3)
/* 0363B4 800357B4 AD41FFF8 */  sw    $at, -8($t2)
/* 0363B8 800357B8 8D61FFFC */  lw    $at, -4($t3)
/* 0363BC 800357BC 156CFFF8 */  bne   $t3, $t4, .L800357A0_ovl0
/* 0363C0 800357C0 AD41FFFC */   sw    $at, -4($t2)
/* 0363C4 800357C4 8FBF001C */  lw    $ra, 0x1c($sp)
/* 0363C8 800357C8 8FB00018 */  lw    $s0, 0x18($sp)
/* 0363CC 800357CC 27BD0048 */  addiu $sp, $sp, 0x48
/* 0363D0 800357D0 03E00008 */  jr    $ra
/* 0363D4 800357D4 00000000 */   nop   
/* 0363D8 800357D8 00000000 */  nop   
/* 0363DC 800357DC 00000000 */  nop   